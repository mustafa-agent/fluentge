---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="рЃЊрЃћрЃерЃЉрЃЮрЃарЃЊрЃў Рђћ FluentGe">
  <section class="max-w-2xl mx-auto px-4 py-12">
    <h1 class="font-['Playfair_Display',serif] text-3xl font-bold mb-2 text-center">­ЪЊі рЃЊрЃћрЃерЃЉрЃЮрЃарЃЊрЃў</h1>
    <p class="text-[#A0A09A] text-center mb-10">рЃерЃћрЃюрЃў рЃАрЃгрЃљрЃЋрЃџрЃўрЃА рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ</p>

    <!-- Continue Where You Left Off -->
    <div id="continue-card" class="hidden mb-8">
      <div class="bg-gradient-to-r from-sky-500/10 to-indigo-500/10 border border-sky-500/20 rounded-2xl p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="text-xl">­Ъџђ</span>
          <h2 class="font-bold text-lg">рЃњрЃљрЃљрЃњрЃарЃФрЃћрЃџрЃћ рЃАрЃгрЃљрЃЋрЃџрЃљ</h2>
        </div>
        <div id="continue-suggestions" class="space-y-2"></div>
      </div>
    </div>

    <!-- Quick Start (shown when no progress yet) -->
    <div id="quick-start" class="hidden mb-8">
      <div class="bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 rounded-2xl p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="text-xl">­ЪЉІ</span>
          <h2 class="font-bold text-lg">рЃЊрЃљрЃўрЃгрЃДрЃћ рЃАрЃгрЃљрЃЋрЃџрЃљ!</h2>
        </div>
        <p class="text-[#A0A09A] text-sm mb-3">рЃљрЃўрЃарЃЕрЃўрЃћ рЃАрЃљрЃЊрЃљрЃю рЃњрЃўрЃюрЃЊрЃљ рЃЊрЃљрЃгрЃДрЃћрЃЉрЃљ:</p>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
          <a href="/flashcards/" class="flex items-center gap-2 bg-[#242426] hover:bg-[#2E2E30] rounded-xl px-4 py-3 transition-colors">
            <span>­ЪЊЮ</span><span class="text-sm font-medium">рЃцрЃџрЃћрЃерЃЦрЃљрЃарЃЊрЃћрЃЉрЃў</span>
          </a>
          <a href="/grammar/to-be/" class="flex items-center gap-2 bg-[#242426] hover:bg-[#2E2E30] rounded-xl px-4 py-3 transition-colors">
            <span>­ЪЊќ</span><span class="text-sm font-medium">рЃњрЃарЃљрЃЏрЃљрЃбрЃўрЃЎрЃљ A1</span>
          </a>
          <a href="/games" class="flex items-center gap-2 bg-[#242426] hover:bg-[#2E2E30] rounded-xl px-4 py-3 transition-colors">
            <span>­Ъј«</span><span class="text-sm font-medium">рЃЌрЃљрЃЏрЃљрЃерЃћрЃЉрЃў</span>
          </a>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-8">
      <div class="bg-[#242426] border border-[#2E2E30] rounded-2xl p-6 text-center">
        <p class="text-3xl font-bold" id="stat-phrases">0</p>
        <p class="text-[#6B6B65] text-sm mt-1">рЃюрЃљрЃАрЃгрЃљрЃЋрЃџрЃў рЃцрЃарЃљрЃќрЃћрЃЉрЃў</p>
      </div>
      <div class="bg-[#242426] border border-[#2E2E30] rounded-2xl p-6 text-center">
        <p class="text-3xl font-bold" id="stat-grammar">0</p>
        <p class="text-[#6B6B65] text-sm mt-1">рЃюрЃљрЃАрЃгрЃљрЃЋрЃџрЃў рЃњрЃљрЃЎрЃЋрЃћрЃЌрЃўрЃџрЃћрЃЉрЃў</p>
      </div>
      <div class="bg-[#242426] border border-[#2E2E30] rounded-2xl p-6 text-center">
        <p class="text-3xl font-bold" id="stat-podcasts">0</p>
        <p class="text-[#6B6B65] text-sm mt-1">рЃЏрЃЮрЃАрЃЏрЃћрЃюрЃўрЃџрЃў рЃърЃЮрЃЊрЃЎрЃљрЃАрЃбрЃћрЃЉрЃў</p>
      </div>
      <div class="bg-[#242426] border border-[#2E2E30] rounded-2xl p-6 text-center">
        <p class="text-3xl font-bold" id="stat-cards">0</p>
        <p class="text-[#6B6B65] text-sm mt-1">рЃюрЃљрЃАрЃгрЃљрЃЋрЃџрЃў рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃћрЃЉрЃў</p>
      </div>
    </div>

    <div class="space-y-3">
      <a href="/dashboard/phrases/" class="flex items-center justify-between bg-[#242426] border border-[#2E2E30] rounded-xl p-4 hover:bg-[#2E2E30] transition-colors">
        <div class="flex items-center gap-3">
          <span class="text-2xl">­Ъњг</span>
          <div>
            <p class="font-semibold">рЃцрЃарЃљрЃќрЃћрЃЉрЃў</p>
            <p class="text-[#6B6B65] text-xs">рЃюрЃљрЃАрЃгрЃљрЃЋрЃџрЃў рЃцрЃарЃљрЃќрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ</p>
          </div>
        </div>
        <span class="text-[#6B6B65]">Рєњ</span>
      </a>

      <a href="/dashboard/grammar/" class="flex items-center justify-between bg-[#242426] border border-[#2E2E30] rounded-xl p-4 hover:bg-[#2E2E30] transition-colors">
        <div class="flex items-center gap-3">
          <span class="text-2xl">­ЪЊќ</span>
          <div>
            <p class="font-semibold">рЃњрЃарЃљрЃЏрЃљрЃбрЃўрЃЎрЃљ</p>
            <p class="text-[#6B6B65] text-xs">рЃюрЃљрЃАрЃгрЃљрЃЋрЃџрЃў рЃњрЃљрЃЎрЃЋрЃћрЃЌрЃўрЃџрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ</p>
          </div>
        </div>
        <span class="text-[#6B6B65]">Рєњ</span>
      </a>

      <a href="/dashboard/podcasts/" class="flex items-center justify-between bg-[#242426] border border-[#2E2E30] rounded-xl p-4 hover:bg-[#2E2E30] transition-colors">
        <div class="flex items-center gap-3">
          <span class="text-2xl">­ЪјД</span>
          <div>
            <p class="font-semibold">рЃърЃЮрЃЊрЃЎрЃљрЃАрЃбрЃћрЃЉрЃў</p>
            <p class="text-[#6B6B65] text-xs">рЃЏрЃЮрЃАрЃЏрЃћрЃюрЃўрЃџрЃў рЃърЃЮрЃЊрЃЎрЃљрЃАрЃбрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ</p>
          </div>
        </div>
        <span class="text-[#6B6B65]">Рєњ</span>
      </a>

      <a href="/dashboard/cards/" class="flex items-center justify-between bg-[#242426] border border-[#2E2E30] rounded-xl p-4 hover:bg-[#2E2E30] transition-colors">
        <div class="flex items-center gap-3">
          <span class="text-2xl">­ЪЊЮ</span>
          <div>
            <p class="font-semibold">рЃцрЃџрЃћрЃерЃЦрЃљрЃарЃЊрЃћрЃЉрЃў</p>
            <p class="text-[#6B6B65] text-xs">рЃАрЃўрЃбрЃДрЃЋрЃћрЃЉрЃўрЃА рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ</p>
          </div>
        </div>
        <span class="text-[#6B6B65]">Рєњ</span>
      </a>
    </div>
  </section>

  <script is:inline>
    (function() {
      const phrases = JSON.parse(localStorage.getItem('fluentge-learned-phrases') || '[]');
      const grammar = JSON.parse(localStorage.getItem('fluentge-learned-grammar') || '[]');
      const podcasts = JSON.parse(localStorage.getItem('fluentge-learned-podcasts') || '[]');
      const cards = JSON.parse(localStorage.getItem('knownCards') || '[]');
      document.getElementById('stat-phrases').textContent = phrases.length;
      document.getElementById('stat-grammar').textContent = grammar.length;
      document.getElementById('stat-podcasts').textContent = podcasts.length;
      document.getElementById('stat-cards').textContent = cards.length;

      // Continue where you left off logic
      var totalProgress = phrases.length + grammar.length + podcasts.length + cards.length;
      var suggestions = [];

      // Grammar progression: suggest next unlearned lesson
      var grammarOrder = [
        {slug:'to-be', title:'рЃќрЃЏрЃюрЃљ "to be"'},
        {slug:'articles', title:'рЃљрЃарЃбрЃўрЃЎрЃџрЃћрЃЉрЃў (a/an/the)'},
        {slug:'plural-nouns', title:'рЃЏрЃарЃљрЃЋрЃџрЃЮрЃЉрЃўрЃЌрЃў рЃарЃўрЃфрЃ«рЃЋрЃў'}
      ];
      var nextGrammar = grammarOrder.find(function(g) {
        return !grammar.some(function(learned) { return learned.toLowerCase().includes(g.slug.replace('-',' ')); });
      });
      if (nextGrammar) {
        suggestions.push({
          icon: '­ЪЊќ',
          text: 'рЃњрЃарЃљрЃЏрЃљрЃбрЃўрЃЎрЃљ: ' + nextGrammar.title,
          href: '/grammar/' + nextGrammar.slug + '/',
          color: 'green'
        });
      }

      // Flashcards: always a good suggestion
      if (cards.length > 0) {
        suggestions.push({
          icon: '­ЪЊЮ',
          text: 'рЃњрЃљрЃљрЃњрЃарЃФрЃћрЃџрЃћ рЃцрЃџрЃћрЃерЃЦрЃљрЃарЃЊрЃћрЃЉрЃў Рђћ ' + cards.length + ' рЃАрЃўрЃбрЃДрЃЋрЃљ рЃюрЃљрЃАрЃгрЃљрЃЋрЃџрЃў',
          href: '/flashcards/',
          color: 'sky'
        });
      } else {
        suggestions.push({
          icon: '­ЪЊЮ',
          text: 'рЃЊрЃљрЃўрЃгрЃДрЃћ рЃцрЃџрЃћрЃерЃЦрЃљрЃарЃЊрЃћрЃЉрЃў Рђћ рЃўрЃАрЃгрЃљрЃЋрЃџрЃћ рЃљрЃ«рЃљрЃџрЃў рЃАрЃўрЃбрЃДрЃЋрЃћрЃЉрЃў',
          href: '/flashcards/',
          color: 'sky'
        });
      }

      // Phrases: suggest if not many learned
      if (phrases.length < 50) {
        suggestions.push({
          icon: '­Ъњг',
          text: 'рЃўрЃАрЃгрЃљрЃЋрЃџрЃћ рЃДрЃЮрЃЋрЃћрЃџрЃЊрЃдрЃўрЃБрЃарЃў рЃцрЃарЃљрЃќрЃћрЃЉрЃў',
          href: '/phrases/',
          color: 'indigo'
        });
      }

      // Games: suggest for variety
      suggestions.push({
        icon: '­Ъј«',
        text: 'рЃўрЃЌрЃљрЃЏрЃљрЃерЃћ рЃЊрЃљ рЃўрЃАрЃгрЃљрЃЋрЃџрЃћ рЃўрЃюрЃњрЃџрЃўрЃАрЃБрЃарЃў',
        href: '/games',
        color: 'amber'
      });

      // Show max 3 suggestions
      suggestions = suggestions.slice(0, 3);

      if (totalProgress === 0) {
        document.getElementById('quick-start').classList.remove('hidden');
      } else {
        var card = document.getElementById('continue-card');
        var container = document.getElementById('continue-suggestions');
        card.classList.remove('hidden');
        suggestions.forEach(function(s) {
          var a = document.createElement('a');
          a.href = s.href;
          a.className = 'flex items-center gap-3 bg-[#242426] hover:bg-[#2E2E30] rounded-xl px-4 py-3 transition-all hover:translate-x-1';
          a.innerHTML = '<span class="text-lg">' + s.icon + '</span><span class="text-sm font-medium flex-1">' + s.text + '</span><span class="text-[#6B6B65]">Рєњ</span>';
          container.appendChild(a);
        });
      }
    })();
  </script>
</Layout>
