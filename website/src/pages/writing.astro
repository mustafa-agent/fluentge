---
import Layout from '../layouts/Layout.astro';
---

<Layout title="рЃгрЃћрЃарЃўрЃА рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃљ Рђћ FluentGe" description="рЃўрЃюрЃњрЃџрЃўрЃАрЃБрЃарЃљрЃЊ рЃгрЃћрЃарЃўрЃА рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃљ рЃЦрЃљрЃарЃЌрЃЋрЃћрЃџрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА. 30 рЃЊрЃљрЃЋрЃљрЃџрЃћрЃЉрЃљ A1-рЃЊрЃљрЃю B2-рЃЏрЃЊрЃћ. рЃБрЃцрЃљрЃАрЃЮ!">
  <section class="max-w-3xl mx-auto px-4 py-12">
    <div class="text-center mb-8">
      <h1 class="font-['Playfair_Display',serif] text-3xl sm:text-4xl mb-3">РюЇ№ИЈ рЃгрЃћрЃарЃўрЃА рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃљ</h1>
      <p class="text-[#6B6B65] text-sm">рЃўрЃЋрЃљрЃарЃ»рЃўрЃерЃћ рЃўрЃюрЃњрЃџрЃўрЃАрЃБрЃарЃљрЃЊ рЃгрЃћрЃарЃљрЃерЃў Рђћ 30 рЃЊрЃљрЃЋрЃљрЃџрЃћрЃЉрЃљ A1-рЃЊрЃљрЃю B2-рЃЏрЃЊрЃћ</p>
      <div class="flex justify-center gap-4 mt-4">
        <div class="bg-[#242426] border border-[#2E2E30] rounded-xl px-4 py-2 text-center">
          <p class="text-xs text-[#6B6B65]">рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃБрЃџрЃў</p>
          <p class="text-xl font-bold" id="completed-count">0</p>
        </div>
        <div class="bg-[#242426] border border-[#2E2E30] rounded-xl px-4 py-2 text-center">
          <p class="text-xs text-[#6B6B65]">рЃАрЃБрЃџ</p>
          <p class="text-xl font-bold">30</p>
        </div>
      </div>
    </div>

    <!-- Level Filter -->
    <div class="flex justify-center gap-2 mb-8 flex-wrap">
      <button class="level-filter active px-4 py-2 rounded-xl text-sm font-semibold border transition-colors" data-level="all">рЃДрЃЋрЃћрЃџрЃљ</button>
      <button class="level-filter px-4 py-2 rounded-xl text-sm font-semibold border transition-colors" data-level="A1" style="border-color: #22c55e;">A1</button>
      <button class="level-filter px-4 py-2 rounded-xl text-sm font-semibold border transition-colors" data-level="A2" style="border-color: #3b82f6;">A2</button>
      <button class="level-filter px-4 py-2 rounded-xl text-sm font-semibold border transition-colors" data-level="B1" style="border-color: #f59e0b;">B1</button>
      <button class="level-filter px-4 py-2 rounded-xl text-sm font-semibold border transition-colors" data-level="B2" style="border-color: #ef4444;">B2</button>
    </div>

    <!-- Prompts List -->
    <div id="prompts-list" class="space-y-4"></div>

    <!-- Writing Modal -->
    <div id="writing-modal" class="fixed inset-0 bg-black/80 z-50 hidden overflow-y-auto">
      <div class="max-w-3xl mx-auto px-4 py-8 min-h-screen">
        <div class="bg-[#1C1C1E] border border-[#2E2E30] rounded-2xl p-6">
          <div class="flex justify-between items-start mb-4">
            <div>
              <span id="modal-level" class="text-xs font-bold px-2 py-1 rounded-lg"></span>
              <h2 id="modal-title" class="font-['Playfair_Display',serif] text-2xl mt-2"></h2>
              <p id="modal-title-ka" class="text-[#6B6B65] text-sm mt-1"></p>
            </div>
            <button onclick="closeModal()" class="text-[#6B6B65] hover:text-white text-2xl">&times;</button>
          </div>

          <div class="bg-[#242426] border border-[#2E2E30] rounded-xl p-4 mb-4">
            <p class="text-xs text-[#6B6B65] uppercase tracking-wider mb-2">­ЪњА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў</p>
            <p id="modal-example" class="text-sm italic text-[#A8A8A0]"></p>
          </div>

          <div class="bg-[#242426] border border-[#2E2E30] rounded-xl p-4 mb-4">
            <p class="text-xs text-[#6B6B65] uppercase tracking-wider mb-2">­ЪЊџ рЃАрЃљрЃАрЃљрЃарЃњрЃћрЃЉрЃџрЃЮ рЃАрЃўрЃбрЃДрЃЋрЃћрЃЉрЃў</p>
            <div id="modal-vocab" class="grid grid-cols-2 gap-1 text-sm"></div>
          </div>

          <div class="relative mb-4">
            <textarea id="writing-area" class="w-full bg-[#242426] border border-[#2E2E30] rounded-xl p-4 text-white min-h-[200px] resize-y focus:border-white/30 focus:outline-none" placeholder="рЃЊрЃљрЃгрЃћрЃарЃћ рЃљрЃЦ..."></textarea>
            <div class="absolute bottom-3 right-3 text-xs text-[#6B6B65]">
              <span id="word-count">0</span> / <span id="target-words">0</span> рЃАрЃўрЃбрЃДрЃЋрЃљ
            </div>
          </div>

          <!-- Self-check -->
          <div id="self-check" class="bg-[#242426] border border-[#2E2E30] rounded-xl p-4 mb-4">
            <p class="text-xs text-[#6B6B65] uppercase tracking-wider mb-3">РюЁ рЃЌрЃЋрЃўрЃЌ-рЃерЃћрЃцрЃљрЃАрЃћрЃЉрЃљ</p>
            <label class="flex items-center gap-2 text-sm mb-2 cursor-pointer"><input type="checkbox" class="check-item rounded"> рЃњрЃарЃљрЃЏрЃљрЃбрЃўрЃЎрЃљ рЃАрЃгрЃЮрЃарЃўрЃљ?</label>
            <label class="flex items-center gap-2 text-sm mb-2 cursor-pointer"><input type="checkbox" class="check-item rounded"> рЃљрЃ«рЃљрЃџрЃў рЃАрЃўрЃбрЃДрЃЋрЃћрЃЉрЃў рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃћ?</label>
            <label class="flex items-center gap-2 text-sm mb-2 cursor-pointer"><input type="checkbox" class="check-item rounded"> рЃАрЃўрЃбрЃДрЃЋрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ рЃЏрЃўрЃЋрЃљрЃдрЃгрЃўрЃћ?</label>
            <label class="flex items-center gap-2 text-sm mb-2 cursor-pointer"><input type="checkbox" class="check-item rounded"> рЃљрЃќрЃарЃў рЃњрЃљрЃАрЃљрЃњрЃћрЃЉрЃўрЃљ?</label>
            <label class="flex items-center gap-2 text-sm cursor-pointer"><input type="checkbox" class="check-item rounded"> рЃърЃБрЃюрЃЦрЃбрЃБрЃљрЃфрЃўрЃљ рЃАрЃгрЃЮрЃарЃўрЃљ?</label>
          </div>

          <div class="flex gap-3">
            <button onclick="saveDraft()" class="flex-1 bg-white/10 border border-white/10 font-semibold px-6 py-3 rounded-xl hover:bg-white/20 transition-colors">­ЪњЙ рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ</button>
            <button onclick="markComplete()" class="flex-1 bg-green-600 font-semibold px-6 py-3 rounded-xl hover:bg-green-700 transition-colors">РюЁ рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃљ</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    const prompts = [
      // A1 Рђћ Simple sentences
      { id: 1, level: "A1", title: "Describe Your Family", titleKa: "рЃљрЃдрЃгрЃћрЃарЃћ рЃерЃћрЃюрЃў рЃЮрЃ»рЃљрЃ«рЃў", target: 30, example: "I have a small family. My mother's name is...", vocab: [["mother Рђћ рЃЊрЃћрЃЊрЃљ"], ["father Рђћ рЃЏрЃљрЃЏрЃљ"], ["brother Рђћ рЃФрЃЏрЃљ"], ["sister Рђћ рЃЊрЃљ"], ["family Рђћ рЃЮрЃ»рЃљрЃ«рЃў"], ["young Рђћ рЃљрЃ«рЃљрЃџрЃњрЃљрЃќрЃарЃЊрЃљ"]] },
      { id: 2, level: "A1", title: "Write About Your Day", titleKa: "рЃЊрЃљрЃгрЃћрЃарЃћ рЃерЃћрЃюрЃў рЃЊрЃдрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ", target: 30, example: "I wake up at 7 o'clock. First, I...", vocab: [["morning Рђћ рЃЊрЃўрЃџрЃљ"], ["breakfast Рђћ рЃАрЃљрЃБрЃќрЃЏрЃћ"], ["school Рђћ рЃАрЃЎрЃЮрЃџрЃљ"], ["evening Рђћ рЃАрЃљрЃдрЃљрЃЏрЃЮ"], ["sleep Рђћ рЃФрЃўрЃџрЃў"], ["eat Рђћ рЃГрЃљрЃЏрЃљ"]] },
      { id: 3, level: "A1", title: "Describe Your Room", titleKa: "рЃљрЃдрЃгрЃћрЃарЃћ рЃерЃћрЃюрЃў рЃЮрЃЌрЃљрЃ«рЃў", target: 25, example: "My room is small but nice. There is a...", vocab: [["bed Рђћ рЃАрЃљрЃгрЃЮрЃџрЃў"], ["window Рђћ рЃцрЃљрЃюрЃ»рЃљрЃарЃљ"], ["table Рђћ рЃЏрЃљрЃњрЃўрЃЊрЃљ"], ["chair Рђћ рЃАрЃЎрЃљрЃЏрЃў"], ["wall Рђћ рЃЎрЃћрЃЊрЃћрЃџрЃў"], ["floor Рђћ рЃўрЃљрЃбрЃљрЃЎрЃў"]] },
      { id: 4, level: "A1", title: "What Do You Eat?", titleKa: "рЃарЃљрЃА рЃГрЃљрЃЏ?", target: 25, example: "For breakfast, I usually eat bread and cheese...", vocab: [["bread Рђћ рЃърЃБрЃарЃў"], ["cheese Рђћ рЃДрЃЋрЃћрЃџрЃў"], ["water Рђћ рЃгрЃДрЃљрЃџрЃў"], ["fruit Рђћ рЃ«рЃўрЃџрЃў"], ["meat Рђћ рЃ«рЃЮрЃарЃфрЃў"], ["delicious Рђћ рЃњрЃћрЃЏрЃарЃўрЃћрЃџрЃў"]] },
      { id: 5, level: "A1", title: "Write About a Friend", titleKa: "рЃЊрЃљрЃгрЃћрЃарЃћ рЃЏрЃћрЃњрЃЮрЃЉрЃарЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ", target: 30, example: "My best friend's name is Giorgi. He is...", vocab: [["friend Рђћ рЃЏрЃћрЃњрЃЮрЃЉрЃљрЃарЃў"], ["kind Рђћ рЃЎрЃћрЃЌрЃўрЃџрЃў"], ["funny Рђћ рЃАрЃљрЃАрЃљрЃфрЃўрЃџрЃЮ"], ["tall Рђћ рЃЏрЃљрЃдрЃљрЃџрЃў"], ["smart Рђћ рЃГрЃЎрЃЋрЃўрЃљрЃюрЃў"], ["together Рђћ рЃћрЃарЃЌрЃљрЃЊ"]] },
      { id: 6, level: "A1", title: "Describe Your School", titleKa: "рЃљрЃдрЃгрЃћрЃарЃћ рЃерЃћрЃюрЃў рЃАрЃЎрЃЮрЃџрЃљ", target: 30, example: "My school is big. It has many classrooms...", vocab: [["teacher Рђћ рЃЏрЃљрЃАрЃгрЃљрЃЋрЃџрЃћрЃЉрЃћрЃџрЃў"], ["classroom Рђћ рЃЎрЃџрЃљрЃАрЃў"], ["student Рђћ рЃЏрЃЮрЃАрЃгрЃљрЃЋрЃџрЃћ"], ["book Рђћ рЃгрЃўрЃњрЃюрЃў"], ["lesson Рђћ рЃњрЃљрЃЎрЃЋрЃћрЃЌрЃўрЃџрЃў"], ["learn Рђћ рЃАрЃгрЃљрЃЋрЃџрЃљ"]] },
      { id: 7, level: "A1", title: "What Do You Like?", titleKa: "рЃарЃљ рЃЏрЃЮрЃњрЃгрЃЮрЃюрЃА?", target: 25, example: "I like music and football. My favorite...", vocab: [["like Рђћ рЃЏрЃЮрЃгрЃЮрЃюрЃћрЃЉрЃљ"], ["love Рђћ рЃАрЃўрЃДрЃЋрЃљрЃарЃБрЃџрЃў"], ["favorite Рђћ рЃАрЃљрЃДрЃЋрЃљрЃарЃћрЃџрЃў"], ["music Рђћ рЃЏрЃБрЃАрЃўрЃЎрЃљ"], ["movie Рђћ рЃцрЃўрЃџрЃЏрЃў"], ["play Рђћ рЃЌрЃљрЃЏрЃљрЃерЃў"]] },
      { id: 8, level: "A1", title: "Write About a Pet", titleKa: "рЃЊрЃљрЃгрЃћрЃарЃћ рЃерЃўрЃюрЃљрЃБрЃарЃў рЃфрЃ«рЃЮрЃЋрЃћрЃџрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ", target: 25, example: "I have a dog. His name is...", vocab: [["dog Рђћ рЃФрЃљрЃдрЃџрЃў"], ["cat Рђћ рЃЎрЃљрЃбрЃљ"], ["small Рђћ рЃърЃљрЃбрЃљрЃарЃљ"], ["cute Рђћ рЃАрЃљрЃДрЃЋрЃљрЃарЃћрЃџрЃў"], ["feed Рђћ рЃЎрЃЋрЃћрЃЉрЃљ"], ["walk Рђћ рЃАрЃћрЃўрЃарЃюрЃЮрЃЉрЃљ"]] },

      // A2 Рђћ Short paragraphs
      { id: 9, level: "A2", title: "My Favorite Holiday", titleKa: "рЃЕрЃћрЃЏрЃў рЃАрЃљрЃДрЃЋрЃљрЃарЃћрЃџрЃў рЃЊрЃдрЃћрЃАрЃљрЃАрЃгрЃљрЃБрЃџрЃў", target: 50, example: "My favorite holiday is New Year. Every year, my family...", vocab: [["celebrate Рђћ рЃќрЃћрЃўрЃЏрЃў"], ["tradition Рђћ рЃбрЃарЃљрЃЊрЃўрЃфрЃўрЃљ"], ["gift Рђћ рЃАрЃљрЃЕрЃБрЃЦрЃљрЃарЃў"], ["together Рђћ рЃћрЃарЃЌрЃљрЃЊ"], ["decorate Рђћ рЃЏрЃЮрЃарЃЌрЃЋрЃљ"], ["special Рђћ рЃњрЃљрЃюрЃАрЃљрЃЎрЃБрЃЌрЃарЃћрЃЉрЃБрЃџрЃў"]] },
      { id: 10, level: "A2", title: "A Trip I Took", titleKa: "рЃЏрЃЮрЃњрЃќрЃљрЃБрЃарЃЮрЃЉрЃљ рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃњрЃљрЃЋрЃљрЃЎрЃћрЃЌрЃћ", target: 60, example: "Last summer, I went to Batumi with my family...", vocab: [["travel Рђћ рЃЏрЃЮрЃњрЃќрЃљрЃБрЃарЃЮрЃЉрЃљ"], ["beach Рђћ рЃАрЃљрЃюрЃљрЃърЃўрЃарЃЮ"], ["hotel Рђћ рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮ"], ["beautiful Рђћ рЃџрЃљрЃЏрЃљрЃќрЃў"], ["visit Рђћ рЃЏрЃЮрЃюрЃљрЃ«рЃБрЃџрЃћрЃЉрЃљ"], ["photo Рђћ рЃцрЃЮрЃбрЃЮ"]] },
      { id: 11, level: "A2", title: "My Dream Job", titleKa: "рЃЕрЃћрЃЏрЃў рЃАрЃљрЃЮрЃфрЃюрЃћрЃЉрЃЮ рЃАрЃљрЃЏрЃБрЃерЃљрЃЮ", target: 50, example: "When I grow up, I want to be a programmer because...", vocab: [["job Рђћ рЃАрЃљрЃЏрЃБрЃерЃљрЃЮ"], ["salary Рђћ рЃ«рЃћрЃџрЃцрЃљрЃАрЃў"], ["office Рђћ рЃЮрЃцрЃўрЃАрЃў"], ["experience Рђћ рЃњрЃљрЃЏрЃЮрЃфрЃЊрЃўрЃџрЃћрЃЉрЃљ"], ["skill Рђћ рЃБрЃюрЃљрЃарЃў"], ["success Рђћ рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃљ"]] },
      { id: 12, level: "A2", title: "Describe Your City", titleKa: "рЃљрЃдрЃгрЃћрЃарЃћ рЃерЃћрЃюрЃў рЃЦрЃљрЃџрЃљрЃЦрЃў", target: 60, example: "I live in Tbilisi, the capital of Georgia...", vocab: [["city Рђћ рЃЦрЃљрЃџрЃљрЃЦрЃў"], ["street Рђћ рЃЦрЃБрЃЕрЃљ"], ["park Рђћ рЃърЃљрЃарЃЎрЃў"], ["building Рђћ рЃерЃћрЃюрЃЮрЃЉрЃљ"], ["traffic Рђћ рЃбрЃарЃљрЃцрЃўрЃЎрЃў"], ["neighbor Рђћ рЃЏрЃћрЃќрЃЮрЃЉрЃћрЃџрЃў"]] },
      { id: 13, level: "A2", title: "A Recipe I Like", titleKa: "рЃарЃћрЃфрЃћрЃърЃбрЃў рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЏрЃЮрЃЏрЃгрЃЮрЃюрЃА", target: 50, example: "I want to tell you about khachapuri. First, you need...", vocab: [["ingredient Рђћ рЃўрЃюрЃњрЃарЃћрЃЊрЃўрЃћрЃюрЃбрЃў"], ["cook Рђћ рЃЏрЃќрЃљрЃарЃћрЃБрЃџрЃў"], ["mix Рђћ рЃерЃћрЃарЃћрЃЋрЃљ"], ["oven Рђћ рЃдрЃБрЃЏрЃћрЃџрЃў"], ["taste Рђћ рЃњрЃћрЃЏрЃЮ"], ["serve Рђћ рЃЏрЃўрЃарЃЌрЃЏрЃћрЃЋрЃљ"]] },
      { id: 14, level: "A2", title: "My Weekend Routine", titleKa: "рЃЕрЃћрЃЏрЃў рЃерЃљрЃЉрЃљрЃЌ-рЃЎрЃЋрЃўрЃарЃўрЃА рЃарЃБрЃбрЃўрЃюрЃљ", target: 50, example: "On weekends, I usually wake up late. Around 10 AM...", vocab: [["weekend Рђћ рЃерЃљрЃЉрЃљрЃЌ-рЃЎрЃЋрЃўрЃарЃљ"], ["relax Рђћ рЃЊрЃљрЃАрЃЋрЃћрЃюрЃћрЃЉрЃљ"], ["hobby Рђћ рЃ░рЃЮрЃЉрЃў"], ["exercise Рђћ рЃЋрЃљрЃарЃ»рЃўрЃерЃў"], ["meet Рђћ рЃерЃћрЃ«рЃЋрЃћрЃЊрЃарЃљ"], ["enjoy Рђћ рЃАрЃўрЃљрЃЏрЃЮрЃЋрЃюрЃћрЃЉрЃљ"]] },
      { id: 15, level: "A2", title: "An Important Person", titleKa: "рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃў", target: 60, example: "The most important person in my life is my grandmother...", vocab: [["respect Рђћ рЃърЃљрЃбрЃўрЃЋрЃўрЃАрЃфрЃћрЃЏрЃљ"], ["inspire Рђћ рЃерЃЌрЃљрЃњрЃЮрЃюрЃћрЃЉрЃљ"], ["support Рђћ рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ"], ["advice Рђћ рЃарЃЕрЃћрЃЋрЃљ"], ["proud Рђћ рЃљрЃЏрЃљрЃДрЃў"], ["grateful Рђћ рЃЏрЃљрЃЊрЃџрЃўрЃћрЃарЃў"]] },
      { id: 16, level: "A2", title: "My Hobbies", titleKa: "рЃЕрЃћрЃЏрЃў рЃ░рЃЮрЃЉрЃў", target: 50, example: "I have several hobbies. The one I enjoy most is...", vocab: [["hobby Рђћ рЃ░рЃЮрЃЉрЃў"], ["practice Рђћ рЃЋрЃљрЃарЃ»рЃўрЃерЃў"], ["creative Рђћ рЃерЃћрЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃўрЃЌрЃў"], ["collect Рђћ рЃерЃћрЃњрЃарЃЮрЃЋрЃћрЃЉрЃљ"], ["improve Рђћ рЃњрЃљрЃБрЃЏрЃ»рЃЮрЃЉрЃћрЃАрЃћрЃЉрЃљ"], ["passionate Рђћ рЃЋрЃюрЃћрЃЉрЃўрЃљрЃюрЃў"]] },

      // B1 Рђћ Essays/opinions
      { id: 17, level: "B1", title: "Social Media: Pros and Cons", titleKa: "рЃАрЃЮрЃфрЃўрЃљрЃџрЃБрЃарЃў рЃЏрЃћрЃЊрЃўрЃљ: рЃЊрЃљрЃЊрЃћрЃЉрЃўрЃЌрЃў рЃЊрЃљ рЃБрЃљрЃарЃДрЃЮрЃцрЃўрЃЌрЃў", target: 100, example: "Social media has become an important part of our lives. On one hand...", vocab: [["advantage Рђћ рЃБрЃърЃўрЃарЃљрЃбрЃћрЃАрЃЮрЃЉрЃљ"], ["disadvantage Рђћ рЃюрЃљрЃЎрЃџрЃў"], ["addiction Рђћ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃљ"], ["privacy Рђћ рЃЎрЃЮрЃюрЃцрЃўрЃЊрЃћрЃюрЃфрЃўрЃљрЃџрЃБрЃарЃЮрЃЉрЃљ"], ["connect Рђћ рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃљ"], ["influence Рђћ рЃњрЃљрЃЋрЃџрЃћрЃюрЃљ"], ["opinion Рђћ рЃљрЃќрЃарЃў"]] },
      { id: 18, level: "B1", title: "Best Way to Learn English", titleKa: "рЃўрЃюрЃњрЃџрЃўрЃАрЃБрЃарЃўрЃА рЃАрЃгрЃљрЃЋрЃџрЃўрЃА рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃњрЃќрЃљ", target: 100, example: "There are many ways to learn English. In my experience...", vocab: [["method Рђћ рЃЏрЃћрЃЌрЃЮрЃЊрЃў"], ["practice Рђћ рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃљ"], ["fluent Рђћ рЃЌрЃљрЃЋрЃўрЃАрЃБрЃцрЃџрЃљрЃЊ"], ["vocabulary Рђћ рЃџрЃћрЃЦрЃАрЃўрЃЎрЃљ"], ["immersion Рђћ рЃЕрЃљрЃФрЃўрЃарЃЋрЃљ"], ["consistent Рђћ рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃБрЃџрЃў"], ["progress Рђћ рЃърЃарЃЮрЃњрЃарЃћрЃАрЃў"]] },
      { id: 19, level: "B1", title: "City vs Village Life", titleKa: "рЃЦрЃљрЃџрЃљрЃЦрЃў рЃЌрЃБ рЃАрЃЮрЃцрЃћрЃџрЃў", target: 100, example: "Some people prefer living in a city, while others choose village life...", vocab: [["opportunity Рђћ рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃџрЃЮрЃЉрЃљ"], ["peaceful Рђћ рЃЏрЃерЃЋрЃўрЃЊрЃў"], ["pollution Рђћ рЃЊрЃљрЃЉрЃўрЃюрЃФрЃБрЃарЃћрЃЉрЃљ"], ["community Рђћ рЃАрЃљрЃќрЃЮрЃњрЃљрЃЊрЃЮрЃћрЃЉрЃљ"], ["convenient Рђћ рЃЏрЃЮрЃАрЃљрЃ«рЃћрЃарЃ«рЃћрЃЉрЃћрЃџрЃў"], ["nature Рђћ рЃЉрЃБрЃюрЃћрЃЉрЃљ"], ["lifestyle Рђћ рЃфрЃ«рЃЮрЃЋрЃарЃћрЃЉрЃўрЃА рЃгрЃћрЃАрЃў"]] },
      { id: 20, level: "B1", title: "Technology in Education", titleKa: "рЃбрЃћрЃЦрЃюрЃЮрЃџрЃЮрЃњрЃўрЃљ рЃњрЃљрЃюрЃљрЃЌрЃџрЃћрЃЉрЃљрЃерЃў", target: 100, example: "Technology has changed the way we learn. Today, students can...", vocab: [["online Рђћ рЃЮрЃюрЃџрЃљрЃўрЃю"], ["access Рђћ рЃгрЃЋрЃЊрЃЮрЃЏрЃљ"], ["resource Рђћ рЃарЃћрЃАрЃБрЃарЃАрЃў"], ["digital Рђћ рЃфрЃўрЃцрЃарЃБрЃџрЃў"], ["effective Рђћ рЃћрЃцрЃћрЃЦрЃбрЃБрЃарЃў"], ["interactive Рђћ рЃўрЃюрЃбрЃћрЃарЃљрЃЦрЃбрЃўрЃБрЃџрЃў"], ["challenge Рђћ рЃњрЃљрЃЏрЃЮрЃгрЃЋрЃћрЃЋрЃљ"]] },
      { id: 21, level: "B1", title: "My Future Goals", titleKa: "рЃЕрЃћрЃЏрЃў рЃЏрЃЮрЃЏрЃљрЃЋрЃџрЃўрЃА рЃЏрЃўрЃќрЃюрЃћрЃЉрЃў", target: 100, example: "I have several goals for my future. First of all...", vocab: [["goal Рђћ рЃЏрЃўрЃќрЃљрЃюрЃў"], ["achieve Рђћ рЃЏрЃўрЃдрЃгрЃћрЃЋрЃљ"], ["career Рђћ рЃЎрЃљрЃарЃўрЃћрЃарЃљ"], ["plan Рђћ рЃњрЃћрЃњрЃЏрЃљ"], ["determine Рђћ рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃћрЃЉрЃљ"], ["ambitious Рђћ рЃљрЃЏрЃЉрЃўрЃфрЃўрЃБрЃарЃў"], ["step Рђћ рЃюрЃљрЃЉрЃўрЃ»рЃў"]] },
      { id: 22, level: "B1", title: "Healthy Lifestyle Tips", titleKa: "рЃ»рЃљрЃюрЃАрЃљрЃдрЃў рЃфрЃ«рЃЮрЃЋрЃарЃћрЃЉрЃўрЃА рЃарЃЕрЃћрЃЋрЃћрЃЉрЃў", target: 80, example: "Living a healthy lifestyle is important for everyone. Here are some tips...", vocab: [["exercise Рђћ рЃЋрЃљрЃарЃ»рЃўрЃерЃў"], ["nutrition Рђћ рЃЎрЃЋрЃћрЃЉрЃљ"], ["sleep Рђћ рЃФрЃўрЃџрЃў"], ["stress Рђћ рЃАрЃбрЃарЃћрЃАрЃў"], ["balance Рђћ рЃЉрЃљрЃџрЃљрЃюрЃАрЃў"], ["habit Рђћ рЃЕрЃЋрЃћрЃЋрЃљ"], ["mental Рђћ рЃцрЃАрЃўрЃЦрЃўрЃЎрЃБрЃарЃў"]] },
      { id: 23, level: "B1", title: "Importance of Friendship", titleKa: "рЃЏрЃћрЃњрЃЮрЃЉрЃарЃЮрЃЉрЃўрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ", target: 80, example: "Friendship is one of the most valuable things in life...", vocab: [["trust Рђћ рЃюрЃЊрЃЮрЃЉрЃљ"], ["loyal Рђћ рЃћрЃарЃЌрЃњрЃБрЃџрЃў"], ["support Рђћ рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ"], ["honest Рђћ рЃърЃљрЃбрЃўрЃЮрЃАрЃљрЃюрЃў"], ["bond Рђћ рЃЎрЃљрЃЋрЃерЃўрЃарЃў"], ["memories Рђћ рЃЏрЃЮрЃњрЃЮрЃюрЃћрЃЉрЃћрЃЉрЃў"], ["treasure Рђћ рЃАрЃљрЃњрЃљрЃюрЃФрЃБрЃарЃў"]] },

      // B2 Рђћ Complex essays
      { id: 24, level: "B2", title: "Remote Work Revolution", titleKa: "рЃЊрЃўрЃАрЃбрЃљрЃюрЃфрЃўрЃБрЃарЃў рЃЏрЃБрЃерЃљрЃЮрЃЉрЃўрЃА рЃарЃћрЃЋрЃЮрЃџрЃБрЃфрЃўрЃљ", target: 150, example: "The COVID-19 pandemic fundamentally changed how we work. Remote work, once considered...", vocab: [["productivity Рђћ рЃърЃарЃЮрЃЊрЃБрЃЦрЃбрЃўрЃБрЃџрЃЮрЃЉрЃљ"], ["flexibility Рђћ рЃЏрЃЮрЃЦрЃюрЃўрЃџрЃЮрЃЉрЃљ"], ["collaboration Рђћ рЃЌрЃљрЃюрЃљрЃЏрЃерЃарЃЮрЃЏрЃџрЃЮрЃЉрЃљ"], ["work-life balance Рђћ рЃЉрЃљрЃџрЃљрЃюрЃАрЃў"], ["commute Рђћ рЃЏрЃњрЃќрЃљрЃЋрЃарЃЮрЃЉрЃљ"], ["isolation Рђћ рЃўрЃќрЃЮрЃџрЃљрЃфрЃўрЃљ"], ["adaptation Рђћ рЃљрЃЊрЃљрЃърЃбрЃљрЃфрЃўрЃљ"]] },
      { id: 25, level: "B2", title: "Cultural Identity in Globalization", titleKa: "рЃЎрЃБрЃџрЃбрЃБрЃарЃБрЃџрЃў рЃўрЃЊрЃћрЃюрЃбрЃЮрЃЉрЃљ рЃњрЃџрЃЮрЃЉрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљрЃерЃў", target: 150, example: "As the world becomes increasingly interconnected, the question of cultural identity...", vocab: [["identity Рђћ рЃўрЃЊрЃћрЃюрЃбрЃЮрЃЉрЃљ"], ["tradition Рђћ рЃбрЃарЃљрЃЊрЃўрЃфрЃўрЃљ"], ["preserve Рђћ рЃерЃћрЃюрЃљрЃарЃЕрЃБрЃюрЃћрЃЉрЃљ"], ["diversity Рђћ рЃЏрЃарЃљрЃЋрЃљрЃџрЃцрЃћрЃарЃЮрЃЋрЃюрЃћрЃЉрЃљ"], ["assimilation Рђћ рЃљрЃАрЃўрЃЏрЃўрЃџрЃљрЃфрЃўрЃљ"], ["heritage Рђћ рЃЏрЃћрЃЏрЃЎрЃЋрЃўрЃЊрЃарЃћрЃЮрЃЉрЃљ"], ["globalization Рђћ рЃњрЃџрЃЮрЃЉрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљ"]] },
      { id: 26, level: "B2", title: "AI's Impact on Jobs", titleKa: "рЃ«рЃћрЃџрЃЮрЃЋрЃюрЃБрЃарЃў рЃўрЃюрЃбрЃћрЃџрЃћрЃЦрЃбрЃўрЃА рЃњрЃљрЃЋрЃџрЃћрЃюрЃљ рЃАрЃљрЃЏрЃБрЃерЃљрЃЮрЃћрЃЉрЃќрЃћ", target: 150, example: "Artificial intelligence is rapidly transforming the job market. While some argue...", vocab: [["automation Рђћ рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ"], ["displacement Рђћ рЃњрЃљрЃЊрЃљрЃљрЃЊрЃњрЃўрЃџрЃћрЃЉрЃљ"], ["innovation Рђћ рЃўрЃюрЃЮрЃЋрЃљрЃфрЃўрЃљ"], ["adapt Рђћ рЃљрЃЊрЃљрЃърЃбрЃљрЃфрЃўрЃљ"], ["upskill Рђћ рЃЎрЃЋрЃљрЃџрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃўрЃА рЃљрЃЏрЃљрЃдрЃџрЃћрЃЉрЃљ"], ["ethical Рђћ рЃћрЃЌрЃўрЃЎрЃБрЃарЃў"], ["inevitable Рђћ рЃњрЃљрЃарЃЊрЃљрЃБрЃЋрЃљрЃџрЃў"]] },
      { id: 27, level: "B2", title: "Environmental Responsibility", titleKa: "рЃњрЃљрЃарЃћрЃЏрЃЮрЃАрЃЊрЃљрЃфрЃЋрЃўрЃЌрЃў рЃърЃљрЃАрЃБрЃ«рЃўрЃАрЃЏрЃњрЃћрЃЉрЃџрЃЮрЃЉрЃљ", target: 150, example: "Climate change is arguably the greatest challenge facing humanity today...", vocab: [["sustainability Рђћ рЃЏрЃЊрЃњрЃарЃљрЃЊрЃЮрЃЉрЃљ"], ["renewable Рђћ рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљрЃЊрЃў"], ["carbon footprint Рђћ рЃюрЃљрЃ«рЃерЃўрЃарЃЉрЃљрЃЊрЃўрЃА рЃЎрЃЋрЃљрЃџрЃў"], ["ecosystem Рђћ рЃћрЃЎрЃЮрЃАрЃўрЃАрЃбрЃћрЃЏрЃљ"], ["conservation Рђћ рЃЎрЃЮрЃюрЃАрЃћрЃарЃЋрЃљрЃфрЃўрЃљ"], ["consumption Рђћ рЃЏрЃЮрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљ"], ["consequence Рђћ рЃерЃћрЃЊрЃћрЃњрЃў"]] },
      { id: 28, level: "B2", title: "Education System Reform", titleKa: "рЃњрЃљрЃюрЃљрЃЌрЃџрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃарЃћрЃцрЃЮрЃарЃЏрЃљ", target: 150, example: "Many people believe that our education system needs significant reform...", vocab: [["curriculum Рђћ рЃАрЃљрЃАрЃгрЃљрЃЋрЃџрЃЮ рЃњрЃћрЃњрЃЏрЃљ"], ["critical thinking Рђћ рЃЎрЃарЃўрЃбрЃўрЃЎрЃБрЃџрЃў рЃљрЃќрЃарЃЮрЃЋрЃюрЃћрЃЉрЃљ"], ["standardized Рђћ рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃўрЃќрЃћрЃЉрЃБрЃџрЃў"], ["assessment Рђћ рЃерЃћрЃцрЃљрЃАрЃћрЃЉрЃљ"], ["creativity Рђћ рЃерЃћрЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃўрЃЌрЃЮрЃЉрЃљ"], ["outdated Рђћ рЃЏрЃЮрЃФрЃЋрЃћрЃџрЃћрЃЉрЃБрЃџрЃў"], ["personalized Рђћ рЃърЃћрЃарЃАрЃЮрЃюрЃљрЃџрЃўрЃќрЃћрЃЉрЃБрЃџрЃў"]] },
      { id: 29, level: "B2", title: "Digital Privacy Debate", titleKa: "рЃфрЃўрЃцрЃарЃБрЃџрЃў рЃЎрЃЮрЃюрЃцрЃўрЃЊрЃћрЃюрЃфрЃўрЃљрЃџрЃБрЃарЃЮрЃЉрЃўрЃА рЃЊрЃћрЃЉрЃљрЃбрЃў", target: 150, example: "In the digital age, the concept of privacy has been fundamentally redefined...", vocab: [["surveillance Рђћ рЃЏрЃћрЃЌрЃЋрЃљрЃџрЃДрЃБрЃарЃћрЃЮрЃЉрЃљ"], ["data Рђћ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў"], ["encryption Рђћ рЃЊрЃљрЃерЃўрЃцрЃЋрЃарЃљ"], ["consent Рђћ рЃЌрЃљрЃюрЃ«рЃЏрЃЮрЃЉрЃљ"], ["regulation Рђћ рЃарЃћрЃњрЃБрЃџрЃљрЃфрЃўрЃљ"], ["transparency Рђћ рЃњрЃљрЃЏрЃГрЃЋрЃўрЃарЃЋрЃљрЃџрЃЮрЃЉрЃљ"], ["vulnerability Рђћ рЃЏрЃЮрЃгрЃДрЃЋрЃџрЃљрЃЊрЃЮрЃЉрЃљ"]] },
      { id: 30, level: "B2", title: "Youth Entrepreneurship", titleKa: "рЃљрЃ«рЃљрЃџрЃњрЃљрЃќрЃарЃЊрЃБрЃџрЃў рЃЏрЃћрЃгрЃљрЃарЃЏрЃћрЃЮрЃЉрЃљ", target: 150, example: "Starting a business at a young age has become increasingly common...", vocab: [["entrepreneur Рђћ рЃЏрЃћрЃгрЃљрЃарЃЏрЃћ"], ["startup Рђћ рЃАрЃбрЃљрЃарЃбрЃљрЃърЃў"], ["investment Рђћ рЃўрЃюрЃЋрЃћрЃАрЃбрЃўрЃфрЃўрЃљ"], ["risk Рђћ рЃарЃўрЃАрЃЎрЃў"], ["scalable Рђћ рЃЏрЃљрЃАрЃерЃбрЃљрЃЉрЃўрЃарЃћрЃЉрЃљрЃЊрЃў"], ["mentor Рђћ рЃЏрЃћрЃюрЃбрЃЮрЃарЃў"], ["resilience Рђћ рЃњрЃљрЃЏрЃФрЃџрЃћрЃЮрЃЉрЃљ"]] },
    ];

    const levelColors = { A1: '#22c55e', A2: '#3b82f6', B1: '#f59e0b', B2: '#ef4444' };
    let currentPromptId = null;

    function getProgress() {
      return JSON.parse(localStorage.getItem('fluentge_writing') || '{}');
    }
    function saveProgress(data) {
      localStorage.setItem('fluentge_writing', JSON.stringify(data));
    }

    function updateCompletedCount() {
      const progress = getProgress();
      const count = Object.values(progress).filter(p => p.completed).length;
      document.getElementById('completed-count').textContent = count;
    }

    function renderPrompts(filterLevel = 'all') {
      const container = document.getElementById('prompts-list');
      const progress = getProgress();
      const filtered = filterLevel === 'all' ? prompts : prompts.filter(p => p.level === filterLevel);

      container.innerHTML = filtered.map(p => {
        const prog = progress[p.id] || {};
        const isCompleted = prog.completed;
        const hasDraft = prog.draft && prog.draft.length > 0;
        const color = levelColors[p.level];

        return `<div class="bg-[#242426] border border-[#2E2E30] rounded-2xl p-5 cursor-pointer hover:border-[#3E3E40] transition-colors ${isCompleted ? 'opacity-70' : ''}" onclick="openPrompt(${p.id})">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-bold px-2 py-0.5 rounded-lg" style="background: ${color}20; color: ${color}">${p.level}</span>
                ${isCompleted ? '<span class="text-xs text-green-500">РюЁ рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃБрЃџрЃў</span>' : hasDraft ? '<span class="text-xs text-yellow-500">­ЪЊЮ рЃЏрЃЮрЃюрЃљрЃ«рЃљрЃќрЃў</span>' : ''}
                <span class="text-xs text-[#6B6B65]">${p.target} рЃАрЃўрЃбрЃДрЃЋрЃљ</span>
              </div>
              <h3 class="font-semibold text-lg">${p.title}</h3>
              <p class="text-[#6B6B65] text-sm">${p.titleKa}</p>
            </div>
            <span class="text-2xl ml-3">${isCompleted ? 'РюЁ' : 'РюЇ№ИЈ'}</span>
          </div>
        </div>`;
      }).join('');
    }

    function openPrompt(id) {
      const p = prompts.find(pr => pr.id === id);
      if (!p) return;
      currentPromptId = id;

      const color = levelColors[p.level];
      document.getElementById('modal-level').textContent = p.level;
      document.getElementById('modal-level').style.background = color + '20';
      document.getElementById('modal-level').style.color = color;
      document.getElementById('modal-title').textContent = p.title;
      document.getElementById('modal-title-ka').textContent = p.titleKa;
      document.getElementById('modal-example').textContent = p.example;
      document.getElementById('target-words').textContent = p.target;

      document.getElementById('modal-vocab').innerHTML = p.vocab.map(v =>
        `<span class="text-[#A8A8A0]">${v[0]}</span>`
      ).join('');

      const progress = getProgress();
      const prog = progress[id] || {};
      document.getElementById('writing-area').value = prog.draft || '';
      updateWordCount();

      // Reset checkboxes
      document.querySelectorAll('.check-item').forEach(cb => cb.checked = false);

      document.getElementById('writing-modal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      // Auto-save draft
      saveDraft();
      document.getElementById('writing-modal').classList.add('hidden');
      document.body.style.overflow = '';
      currentPromptId = null;
    }

    function saveDraft() {
      if (!currentPromptId) return;
      const progress = getProgress();
      if (!progress[currentPromptId]) progress[currentPromptId] = {};
      progress[currentPromptId].draft = document.getElementById('writing-area').value;
      saveProgress(progress);
      renderPrompts(currentFilter);
    }

    function markComplete() {
      if (!currentPromptId) return;
      saveDraft();
      const progress = getProgress();
      if (!progress[currentPromptId]) progress[currentPromptId] = {};
      progress[currentPromptId].completed = true;
      progress[currentPromptId].completedAt = new Date().toISOString();
      saveProgress(progress);
      updateCompletedCount();
      closeModal();
    }

    function updateWordCount() {
      const text = document.getElementById('writing-area').value.trim();
      const count = text ? text.split(/\s+/).length : 0;
      document.getElementById('word-count').textContent = count;
      const target = parseInt(document.getElementById('target-words').textContent);
      document.getElementById('word-count').style.color = count >= target ? '#22c55e' : '#6B6B65';
    }

    let currentFilter = 'all';

    // Level filter buttons
    document.querySelectorAll('.level-filter').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.level-filter').forEach(b => {
          b.classList.remove('active');
          b.style.background = 'transparent';
          b.style.color = '#A8A8A0';
        });
        btn.classList.add('active');
        btn.style.background = 'rgba(255,255,255,0.1)';
        btn.style.color = 'white';
        currentFilter = btn.dataset.level;
        renderPrompts(currentFilter);
      });
    });

    // Word count
    document.getElementById('writing-area').addEventListener('input', updateWordCount);

    // Close modal on Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Init
    document.querySelector('.level-filter.active').style.background = 'rgba(255,255,255,0.1)';
    document.querySelector('.level-filter.active').style.color = 'white';
    updateCompletedCount();
    renderPrompts();
  </script>
</Layout>
